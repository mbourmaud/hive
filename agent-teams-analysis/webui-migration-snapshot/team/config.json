{
  "name": "webui-migration",
  "description": "Migrate WebUI from monolithic HTML to React + shadcn/ui + Tailwind",
  "createdAt": 1770925580406,
  "leadAgentId": "team-lead@webui-migration",
  "leadSessionId": "130ed1f5-1307-4436-a721-9560b11f3c3c",
  "members": [
    {
      "agentId": "team-lead@webui-migration",
      "name": "team-lead",
      "agentType": "team-lead",
      "model": "claude-opus-4-6",
      "joinedAt": 1770925580406,
      "tmuxPaneId": "",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": []
    },
    {
      "agentId": "scaffolder@webui-migration",
      "name": "scaffolder",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Your task is to scaffold a Vite + React + TypeScript + Tailwind CSS project in the web/ directory.\n\nIMPORTANT: Do NOT run npm create vite, npx, or any npm commands. Manually create all configuration files.\n\nThe web/ directory already has an index.html (the old monolithic file). Keep it for now.\n\nCreate these files:\n\n1. **web/package.json**:\n```json\n{\n  \"name\": \"hive-webui\",\n  \"private\": true,\n  \"version\": \"0.0.1\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc -b && vite build\",\n    \"preview\": \"vite preview\"\n  },\n  \"dependencies\": {\n    \"react\": \"^19.0.0\",\n    \"react-dom\": \"^19.0.0\",\n    \"@radix-ui/react-avatar\": \"^1.1.3\",\n    \"@radix-ui/react-progress\": \"^1.1.2\",\n    \"@radix-ui/react-scroll-area\": \"^1.2.3\",\n    \"@radix-ui/react-separator\": \"^1.1.2\",\n    \"class-variance-authority\": \"^0.7.1\",\n    \"clsx\": \"^2.1.1\",\n    \"lucide-react\": \"^0.475.0\",\n    \"tailwind-merge\": \"^3.0.2\"\n  },\n  \"devDependencies\": {\n    \"@tailwindcss/vite\": \"^4.0.0\",\n    \"@types/react\": \"^19.0.0\",\n    \"@types/react-dom\": \"^19.0.0\",\n    \"tailwindcss\": \"^4.0.0\",\n    \"typescript\": \"~5.7.0\",\n    \"vite\": \"^6.1.0\",\n    \"vite-plugin-singlefile\": \"^2.0.3\",\n    \"@vitejs/plugin-react\": \"^4.3.0\"\n  }\n}\n```\n\n2. **web/vite.config.ts**:\n```typescript\nimport { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport { viteSingleFile } from \"vite-plugin-singlefile\";\nimport path from \"path\";\n\nexport default defineConfig({\n  plugins: [react(), tailwindcss(), viteSingleFile()],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(__dirname, \"./src\"),\n    },\n  },\n  server: {\n    port: 5173,\n    proxy: {\n      \"/api\": {\n        target: \"http://localhost:3333\",\n        changeOrigin: true,\n      },\n    },\n  },\n  build: {\n    outDir: \"dist\",\n    emptyOutDir: true,\n  },\n});\n```\n\n3. **web/tsconfig.json**:\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"useDefineForClassFields\": true,\n    \"lib\": [\"ES2020\", \"DOM\", \"DOM.Iterable\"],\n    \"module\": \"ESNext\",\n    \"skipLibCheck\": true,\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"isolatedModules\": true,\n    \"moduleDetection\": \"force\",\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\",\n    \"strict\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"noUncheckedIndexedAccess\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"./src/*\"]\n    }\n  },\n  \"include\": [\"src\"]\n}\n```\n\n4. **web/tsconfig.app.json**:\n```json\n{\n  \"extends\": \"./tsconfig.json\",\n  \"compilerOptions\": {\n    \"noUnusedLocals\": false,\n    \"noUnusedParameters\": false\n  },\n  \"include\": [\"src\"]\n}\n```\n\n5. **web/src/vite-env.d.ts**:\n```typescript\n/// <reference types=\"vite/client\" />\n```\n\n6. **web/index.html** — This is the Vite entry point. RENAME the old index.html to index.html.bak first, then create the new one:\n```html\n<!DOCTYPE html>\n<html lang=\"en\" data-theme=\"dark\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>HIVE Monitor</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script type=\"module\" src=\"/src/main.tsx\"></script>\n  </body>\n</html>\n```\n\n7. **web/src/main.tsx**:\n```tsx\nimport { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport \"./globals.css\";\nimport App from \"./App\";\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n```\n\n8. **web/src/globals.css**:\n```css\n@import \"tailwindcss\";\n\n/* ===== HONEY THEME — DARK (default) ===== */\n:root {\n  --bg: #1a1412;\n  --surface: #231c17;\n  --surface2: #2d241d;\n  --border: #3d3229;\n  --text: #faf6f1;\n  --text-muted: #a89a8c;\n  --accent: #f59e0b;\n  --accent-hover: #d97706;\n  --green: #22c55e;\n  --red: #ef4444;\n  --yellow: #eab308;\n  --purple: #a78bfa;\n  --radius: 8px;\n  --radius-pill: 9999px;\n  --transition: 0.2s ease;\n}\n\n/* ===== LIGHT MODE ===== */\n[data-theme=\"light\"] {\n  --bg: #faf7f2;\n  --surface: #ffffff;\n  --surface2: #f5f0e8;\n  --border: #e8dfd3;\n  --text: #1a1412;\n  --text-muted: #78716c;\n  --accent: #d97706;\n  --accent-hover: #b45309;\n  --green: #16a34a;\n  --red: #dc2626;\n  --yellow: #ca8a04;\n  --purple: #7c3aed;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Inter\",\n    Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  background: var(--bg);\n  color: var(--text);\n  height: 100vh;\n  overflow: hidden;\n  transition: background var(--transition), color var(--transition);\n}\n\n/* Scrollbar styling */\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--border);\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--text-muted);\n}\n```\n\n9. **web/src/lib/utils.ts**:\n```typescript\nimport { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n```\n\n10. **web/src/App.tsx** (placeholder):\n```tsx\nexport default function App() {\n  return (\n    <div className=\"flex h-screen\" style={{ background: \"var(--bg)\", color: \"var(--text)\" }}>\n      <div className=\"w-[300px] border-r flex flex-col shrink-0\" style={{ background: \"var(--surface)\", borderColor: \"var(--border)\" }}>\n        <div className=\"p-5 border-b\" style={{ borderColor: \"var(--border)\" }}>\n          <h1 className=\"text-xl font-extrabold tracking-[3px]\" style={{ color: \"var(--accent)\" }}>HIVE</h1>\n        </div>\n        <div className=\"flex-1 overflow-auto p-2\">\n          <p style={{ color: \"var(--text-muted)\" }}>Loading...</p>\n        </div>\n      </div>\n      <div className=\"flex-1 flex items-center justify-center\">\n        <p style={{ color: \"var(--text-muted)\" }}>Select a drone</p>\n      </div>\n    </div>\n  );\n}\n```\n\nCreate all directories (web/src/, web/src/lib/, web/src/components/, web/src/components/ui/, web/src/hooks/, web/src/types/, web/src/data/) as needed.\n\nCRITICAL: First rename web/index.html to web/index.html.bak, then create the new web/index.html.",
      "color": "blue",
      "planModeRequired": false,
      "joinedAt": 1770925672088,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    },
    {
      "agentId": "types-worker@webui-migration",
      "name": "types-worker",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Create TypeScript type definitions and mock data files for the React WebUI.\n\nCreate these files:\n\n1. **web/src/types/api.ts**:\n```typescript\nexport interface DroneInfo {\n  name: string;\n  status: string;\n  branch: string;\n  worktree: string;\n  lead_model: string | null;\n  started: string;\n  updated: string;\n  elapsed: string;\n  tasks: TaskInfo[];\n  members: MemberInfo[];\n  messages: MessageInfo[];\n  progress: [number, number];\n  cost: CostInfo;\n  liveness: string;\n}\n\nexport interface TaskInfo {\n  id: string;\n  subject: string;\n  description: string;\n  status: string;\n  owner: string | null;\n  active_form: string | null;\n  is_internal: boolean;\n  duration: string | null;\n}\n\nexport interface MemberInfo {\n  name: string;\n  agent_type: string;\n  model: string;\n  liveness: string;\n}\n\nexport interface MessageInfo {\n  from: string;\n  to: string;\n  text: string;\n  timestamp: string;\n}\n\nexport interface CostInfo {\n  total_usd: number;\n  input_tokens: number;\n  output_tokens: number;\n}\n```\n\n2. **web/src/data/mock.ts** — Port the exact mock data from the existing HTML. Here it is:\n\n```typescript\nimport type { DroneInfo } from \"@/types/api\";\n\nexport const MOCK_DRONES: DroneInfo[] = [\n  {\n    name: \"auth-service\",\n    status: \"in_progress\",\n    liveness: \"working\",\n    branch: \"feat/auth-service\",\n    worktree: \"\",\n    lead_model: \"claude-sonnet-4-5-20250929\",\n    started: \"\",\n    updated: \"\",\n    elapsed: \"1h 2m\",\n    progress: [2, 5],\n    cost: { total_usd: 1.24, input_tokens: 145234, output_tokens: 32456 },\n    tasks: [\n      { id: \"1\", subject: \"Set up project structure and dependencies\", description: \"\", status: \"completed\", owner: \"worker-1\", active_form: null, duration: \"15m 00s\", is_internal: false },\n      { id: \"2\", subject: \"Add user model and database migrations\", description: \"\", status: \"completed\", owner: \"worker-2\", active_form: null, duration: \"18m 00s\", is_internal: false },\n      { id: \"3\", subject: \"Implement JWT token refresh endpoint\", description: \"\", status: \"in_progress\", owner: \"worker-1\", active_form: \"Implementing JWT refresh endpoint\", duration: null, is_internal: false },\n      { id: \"4\", subject: \"Add authentication middleware\", description: \"\", status: \"in_progress\", owner: \"worker-2\", active_form: \"Writing auth middleware\", duration: null, is_internal: false },\n      { id: \"5\", subject: \"Write integration tests for auth flow\", description: \"\", status: \"pending\", owner: null, active_form: null, duration: null, is_internal: false },\n    ],\n    members: [\n      { name: \"worker-1\", agent_type: \"\", model: \"claude-sonnet-4-5-20250929\", liveness: \"working\" },\n      { name: \"worker-2\", agent_type: \"\", model: \"claude-sonnet-4-5-20250929\", liveness: \"working\" },\n      { name: \"worker-3\", agent_type: \"\", model: \"claude-haiku-4-5-20251001\", liveness: \"idle\" },\n    ],\n    messages: [\n      { from: \"team-lead\", to: \"worker-1\", text: \"Start with task 1 — set up the project structure. Use Express.js with TypeScript. Add jsonwebtoken, bcrypt, and prisma as dependencies.\", timestamp: \"2026-02-12T17:10:30Z\" },\n      { from: \"team-lead\", to: \"worker-2\", text: \"Take task 2 — create the User model with Prisma. Include email, password hash, and role fields. Run the migration when done.\", timestamp: \"2026-02-12T17:11:00Z\" },\n      { from: \"worker-1\", to: \"team-lead\", text: \"Project structure is set up. Express + TypeScript + Prisma all configured. Moving to the user model next.\", timestamp: \"2026-02-12T17:15:00Z\" },\n      { from: \"worker-2\", to: \"team-lead\", text: \"User model and migrations done. Schema includes email, password_hash, role, created_at, updated_at. Ready for the next task.\", timestamp: \"2026-02-12T17:28:00Z\" },\n      { from: \"team-lead\", to: \"worker-1\", text: \"Good work on the setup. Now take task 3 — implement the JWT refresh endpoint. Build on the user model worker-2 created.\", timestamp: \"2026-02-12T17:30:00Z\" },\n      { from: \"worker-1\", to: \"team-lead\", text: \"Working on JWT refresh endpoint. Found an edge case with expired refresh tokens — adding a grace period of 30s. Will update when done.\", timestamp: \"2026-02-12T17:45:00Z\" },\n      { from: \"worker-2\", to: \"team-lead\", text: \"Auth middleware is looking good. Validates access tokens, attaches user to req.context. Should I also handle API key auth or just JWT?\", timestamp: \"2026-02-12T17:52:00Z\" },\n      { from: \"team-lead\", to: \"worker-2\", text: \"Nice. Move to task 4 — the auth middleware. Just JWT for now, we can add API key auth later.\", timestamp: \"2026-02-12T17:53:00Z\" },\n    ],\n  },\n  {\n    name: \"frontend-revamp\",\n    status: \"completed\",\n    liveness: \"completed\",\n    branch: \"feat/frontend-revamp\",\n    worktree: \"\",\n    lead_model: \"claude-sonnet-4-5-20250929\",\n    started: \"\",\n    updated: \"\",\n    elapsed: \"2h 15m\",\n    progress: [4, 4],\n    cost: { total_usd: 3.87, input_tokens: 389000, output_tokens: 87000 },\n    tasks: [\n      { id: \"1\", subject: \"Migrate to Tailwind v4\", description: \"\", status: \"completed\", owner: \"worker-1\", active_form: null, duration: \"25m 00s\", is_internal: false },\n      { id: \"2\", subject: \"Refactor component library to use composable patterns\", description: \"\", status: \"completed\", owner: \"worker-2\", active_form: null, duration: \"30m 00s\", is_internal: false },\n      { id: \"3\", subject: \"Add dark mode support\", description: \"\", status: \"completed\", owner: \"worker-1\", active_form: null, duration: \"20m 00s\", is_internal: false },\n      { id: \"4\", subject: \"Update E2E tests for new component APIs\", description: \"\", status: \"completed\", owner: \"worker-3\", active_form: null, duration: \"18m 00s\", is_internal: false },\n    ],\n    members: [\n      { name: \"worker-1\", agent_type: \"\", model: \"claude-sonnet-4-5-20250929\", liveness: \"completed\" },\n      { name: \"worker-2\", agent_type: \"\", model: \"claude-sonnet-4-5-20250929\", liveness: \"completed\" },\n      { name: \"worker-3\", agent_type: \"\", model: \"claude-haiku-4-5-20251001\", liveness: \"completed\" },\n    ],\n    messages: [\n      { from: \"team-lead\", to: \"worker-1\", text: \"Start with Tailwind v4 migration. After that, pick up dark mode support — it depends on your Tailwind work.\", timestamp: \"2026-02-12T14:15:00Z\" },\n      { from: \"worker-1\", to: \"team-lead\", text: \"Tailwind v4 migration complete. Replaced all deprecated utilities, updated config. All components render correctly.\", timestamp: \"2026-02-12T15:20:00Z\" },\n      { from: \"worker-2\", to: \"team-lead\", text: \"Component refactoring done. Button, Card, Modal, Input all use compound patterns now. Breaking change: Card.Header replaces CardHeader.\", timestamp: \"2026-02-12T15:45:00Z\" },\n      { from: \"worker-1\", to: \"team-lead\", text: \"Dark mode is live. Uses system preference by default with manual toggle. Preference persisted in localStorage.\", timestamp: \"2026-02-12T16:10:00Z\" },\n      { from: \"worker-3\", to: \"team-lead\", text: \"All E2E tests updated and passing. 47 tests, 0 failures. PR is ready for review.\", timestamp: \"2026-02-12T16:30:00Z\" },\n    ],\n  },\n  {\n    name: \"db-migration\",\n    status: \"stopped\",\n    liveness: \"stopped\",\n    branch: \"feat/db-migration\",\n    worktree: \"\",\n    lead_model: \"claude-sonnet-4-5-20250929\",\n    started: \"\",\n    updated: \"\",\n    elapsed: \"1h 48m\",\n    progress: [1, 3],\n    cost: { total_usd: 0.52, input_tokens: 54000, output_tokens: 12800 },\n    tasks: [\n      { id: \"1\", subject: \"Create migration scripts for schema v2\", description: \"\", status: \"completed\", owner: \"worker-1\", active_form: null, duration: \"13m 00s\", is_internal: false },\n      { id: \"2\", subject: \"Migrate user sessions to Redis\", description: \"\", status: \"in_progress\", owner: \"worker-1\", active_form: \"Migrating session storage to Redis\", duration: null, is_internal: false },\n      { id: \"3\", subject: \"Add rollback procedures and verification\", description: \"\", status: \"pending\", owner: null, active_form: null, duration: null, is_internal: false },\n    ],\n    members: [\n      { name: \"worker-1\", agent_type: \"\", model: \"claude-sonnet-4-5-20250929\", liveness: \"stopped\" },\n      { name: \"worker-2\", agent_type: \"\", model: \"claude-haiku-4-5-20251001\", liveness: \"stopped\" },\n    ],\n    messages: [\n      { from: \"team-lead\", to: \"worker-1\", text: \"Start with the SQL migration scripts for schema v2. Once done, move to Redis session migration.\", timestamp: \"2026-02-12T16:12:00Z\" },\n      { from: \"worker-1\", to: \"team-lead\", text: \"Migration scripts for schema v2 are done. Added columns, indexes, and constraints. Starting on the Redis session migration.\", timestamp: \"2026-02-12T16:25:00Z\" },\n      { from: \"worker-1\", to: \"team-lead\", text: \"Hit an issue connecting to Redis. Connection pooling config seems wrong. Getting ECONNREFUSED on port 6379.\", timestamp: \"2026-02-12T16:48:00Z\" },\n      { from: \"team-lead\", to: \"worker-1\", text: \"Check if Redis is running locally. Try docker compose up redis if it's containerized.\", timestamp: \"2026-02-12T16:50:00Z\" },\n    ],\n  },\n];\n\nexport const MOCK_LOGS: Record<string, string[]> = {\n  \"auth-service\": [\n    \"[worker-1] Read package.json\",\n    \"[worker-1] Bash: npm init -y && npm install express typescript jsonwebtoken bcrypt @prisma/client\",\n    \"[worker-1] Write src/index.ts — Express server setup\",\n    \"[worker-1] Write tsconfig.json\",\n    \"[worker-2] Read prisma/schema.prisma\",\n    \"[worker-2] Edit prisma/schema.prisma — added User model with email, password_hash, role\",\n    \"[worker-2] Bash: npx prisma migrate dev --name add-users\",\n    \"[worker-2] Migration applied successfully\",\n    \"[worker-1] Read src/models/user.ts\",\n    \"[worker-1] Write src/routes/auth.ts — POST /auth/refresh endpoint\",\n    \"[worker-1] Handling edge case: expired refresh tokens with 30s grace period\",\n    \"[worker-2] Write src/middleware/auth.ts — JWT validation middleware\",\n    \"[worker-2] Read src/routes/index.ts\",\n    \"[worker-2] Edit src/routes/index.ts — applying auth middleware to protected routes\",\n  ],\n  \"frontend-revamp\": [\n    \"[worker-1] Read tailwind.config.js\",\n    \"[worker-1] Bash: npm install tailwindcss@4.0.0\",\n    \"[worker-1] Edit tailwind.config.js — migrating to v4 syntax\",\n    '[worker-1] Grep \"bg-opacity\" across 24 files — replacing deprecated utilities',\n    \"[worker-2] Read src/components/Button.tsx\",\n    \"[worker-2] Write src/components/Button/index.tsx — compound component pattern\",\n    \"[worker-2] Write src/components/Card/index.tsx — compound component pattern\",\n    \"[worker-1] Write src/hooks/useTheme.ts — system-aware dark mode\",\n    \"[worker-1] Edit src/pages/Settings.tsx — added theme toggle\",\n    \"[worker-3] Read tests/e2e/components.spec.ts\",\n    \"[worker-3] Edit tests/e2e/components.spec.ts — updated for new compound APIs\",\n    \"[worker-3] Bash: npx playwright test — 47 passed, 0 failed\",\n  ],\n  \"db-migration\": [\n    \"[worker-1] Read migrations/001_initial.sql\",\n    \"[worker-1] Write migrations/002_schema_v2.sql — new columns and indexes\",\n    \"[worker-1] Bash: psql -f migrations/002_schema_v2.sql\",\n    \"[worker-1] Migration applied successfully\",\n    \"[worker-1] Read src/session/store.ts\",\n    \"[worker-1] Bash: redis-cli ping\",\n    \"[worker-1] ERROR: Could not connect to Redis at 127.0.0.1:6379: Connection refused\",\n    \"[worker-1] Retrying connection...\",\n    \"[worker-1] ERROR: ECONNREFUSED — Redis not reachable\",\n  ],\n};\n```\n\nMake sure the web/src/types/ and web/src/data/ directories exist before creating the files.",
      "color": "green",
      "planModeRequired": false,
      "joinedAt": 1770925721604,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    },
    {
      "agentId": "rust-updater@webui-migration",
      "name": "rust-updater",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Do these two things:\n\n1. In src/webui/mod.rs, change line 23 from:\n   `const EMBEDDED_HTML: &str = include_str!(\"../../web/index.html\");`\n   to:\n   `const EMBEDDED_HTML: &str = include_str!(\"../../web/dist/index.html\");`\n\n2. Add these lines to the end of .gitignore:\n```\n# WebUI build artifacts\nweb/node_modules/\nweb/dist/*\n!web/dist/index.html\n```\n\nRead both files first, then make the edits.",
      "color": "yellow",
      "planModeRequired": false,
      "joinedAt": 1770925725051,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    },
    {
      "agentId": "shadcn-worker@webui-migration",
      "name": "shadcn-worker",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Create the shadcn/ui component files in web/src/components/ui/.\n\nThe project uses Tailwind CSS v4 with CSS variables for the honey theme. The cn() utility is at @/lib/utils.\n\nIMPORTANT: Do NOT run any npx or npm commands. Create all files manually.\n\nFirst, create **web/components.json** (shadcn config):\n```json\n{\n  \"$schema\": \"https://ui.shadcn.com/schema.json\",\n  \"style\": \"new-york\",\n  \"rsc\": false,\n  \"tsx\": true,\n  \"tailwind\": {\n    \"config\": \"\",\n    \"css\": \"src/globals.css\",\n    \"baseColor\": \"neutral\",\n    \"cssVariables\": true,\n    \"prefix\": \"\"\n  },\n  \"aliases\": {\n    \"components\": \"@/components\",\n    \"utils\": \"@/lib/utils\",\n    \"ui\": \"@/components/ui\",\n    \"lib\": \"@/lib\",\n    \"hooks\": \"@/hooks\"\n  },\n  \"iconLibrary\": \"lucide\"\n}\n```\n\nNow create these UI primitives in web/src/components/ui/:\n\n1. **button.tsx** — shadcn Button with variants:\n```tsx\nimport * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-[var(--accent)] text-white shadow hover:bg-[var(--accent-hover)]\",\n        destructive: \"bg-[var(--red)] text-white shadow-sm hover:opacity-90\",\n        outline: \"border border-[var(--border)] bg-transparent shadow-sm hover:bg-[var(--surface2)] text-[var(--text)]\",\n        secondary: \"bg-[var(--surface2)] text-[var(--text)] shadow-sm hover:opacity-80\",\n        ghost: \"hover:bg-[var(--surface2)] text-[var(--text-muted)] hover:text-[var(--text)]\",\n        link: \"text-[var(--accent)] underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, ...props }, ref) => {\n    return (\n      <button\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n```\n\n2. **badge.tsx**:\n```tsx\nimport * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-[var(--accent)] text-white\",\n        secondary: \"border-transparent bg-[var(--surface2)] text-[var(--text)]\",\n        destructive: \"border-transparent bg-[var(--red)] text-white\",\n        outline: \"border-[var(--border)] text-[var(--text)]\",\n        success: \"border-transparent bg-[var(--green)] text-white\",\n        warning: \"border-transparent bg-[var(--yellow)] text-black\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n```\n\n3. **card.tsx**:\n```tsx\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-[var(--border)] bg-[var(--surface)] text-[var(--text)] shadow\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-[var(--text-muted)]\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n```\n\n4. **progress.tsx**:\n```tsx\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\nimport { cn } from \"@/lib/utils\";\n\nconst Progress = React.forwardRef<\n  React.ComponentRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root> & {\n    indicatorClassName?: string;\n  }\n>(({ className, value, indicatorClassName, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-[var(--surface2)]\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className={cn(\n        \"h-full w-full flex-1 bg-[var(--accent)] transition-all\",\n        indicatorClassName\n      )}\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n```\n\n5. **scroll-area.tsx**:\n```tsx\nimport * as React from \"react\";\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport { cn } from \"@/lib/utils\";\n\nconst ScrollArea = React.forwardRef<\n  React.ComponentRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n));\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName;\n\nconst ScrollBar = React.forwardRef<\n  React.ComponentRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-[var(--border)]\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n));\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName;\n\nexport { ScrollArea, ScrollBar };\n```\n\n6. **separator.tsx**:\n```tsx\nimport * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\";\nimport { cn } from \"@/lib/utils\";\n\nconst Separator = React.forwardRef<\n  React.ComponentRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-[var(--border)]\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n```\n\n7. **avatar.tsx**:\n```tsx\nimport * as React from \"react\";\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\";\nimport { cn } from \"@/lib/utils\";\n\nconst Avatar = React.forwardRef<\n  React.ComponentRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-8 w-8 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n));\nAvatar.displayName = AvatarPrimitive.Root.displayName;\n\nconst AvatarImage = React.forwardRef<\n  React.ComponentRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n));\nAvatarImage.displayName = AvatarPrimitive.Image.displayName;\n\nconst AvatarFallback = React.forwardRef<\n  React.ComponentRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full text-xs font-medium\",\n      className\n    )}\n    {...props}\n  />\n));\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;\n\nexport { Avatar, AvatarImage, AvatarFallback };\n```\n\nCreate all 7 component files and the components.json config. Make sure web/src/components/ui/ directory exists.",
      "color": "purple",
      "planModeRequired": false,
      "joinedAt": 1770925858581,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    },
    {
      "agentId": "hooks-worker@webui-migration",
      "name": "hooks-worker",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Create three React hooks in web/src/hooks/.\n\nMake sure the hooks/ directory exists under web/src/.\n\n1. **web/src/hooks/use-drones.ts**:\n```tsx\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport type { DroneInfo } from \"@/types/api\";\nimport { MOCK_DRONES } from \"@/data/mock\";\n\ntype ConnectionStatus = \"connected\" | \"disconnected\" | \"mock\";\n\nexport function useDrones() {\n  const [drones, setDrones] = useState<DroneInfo[]>([]);\n  const [connectionStatus, setConnectionStatus] = useState<ConnectionStatus>(\"disconnected\");\n  const eventSourceRef = useRef<EventSource | null>(null);\n  const retryTimeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\n  const connectSSE = useCallback(() => {\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n    }\n\n    const es = new EventSource(\"/api/events\");\n    eventSourceRef.current = es;\n\n    es.onopen = () => {\n      setConnectionStatus(\"connected\");\n    };\n\n    es.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data) as DroneInfo[];\n        setDrones(data);\n        setConnectionStatus(\"connected\");\n      } catch {\n        // ignore parse errors\n      }\n    };\n\n    es.onerror = () => {\n      es.close();\n      setConnectionStatus(\"disconnected\");\n      // Retry after 3 seconds\n      retryTimeoutRef.current = setTimeout(connectSSE, 3000);\n    };\n  }, []);\n\n  useEffect(() => {\n    // Initial fetch\n    fetch(\"/api/drones\")\n      .then((res) => {\n        if (!res.ok) throw new Error(\"No backend\");\n        return res.json();\n      })\n      .then((data: DroneInfo[]) => {\n        setDrones(data);\n        connectSSE();\n      })\n      .catch(() => {\n        // Dev mode — use mock data\n        console.info(\"No backend detected, using mock data for preview\");\n        setDrones(MOCK_DRONES);\n        setConnectionStatus(\"mock\");\n      });\n\n    return () => {\n      eventSourceRef.current?.close();\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, [connectSSE]);\n\n  return { drones, connectionStatus };\n}\n```\n\n2. **web/src/hooks/use-logs.ts**:\n```tsx\nimport { useState, useEffect, useRef } from \"react\";\nimport { MOCK_LOGS } from \"@/data/mock\";\n\nconst MAX_LINES = 500;\n\nexport function useLogs(droneName: string | null, isMock: boolean) {\n  const [logs, setLogs] = useState<string[]>([]);\n  const eventSourceRef = useRef<EventSource | null>(null);\n  const mockIntervalRef = useRef<ReturnType<typeof setInterval>>();\n\n  useEffect(() => {\n    // Cleanup previous connections\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n      eventSourceRef.current = null;\n    }\n    if (mockIntervalRef.current) {\n      clearInterval(mockIntervalRef.current);\n      mockIntervalRef.current = undefined;\n    }\n    setLogs([]);\n\n    if (!droneName) return;\n\n    if (isMock) {\n      const mockLines = MOCK_LOGS[droneName] || [\"No logs available\"];\n      let idx = 0;\n\n      // Seed initial lines\n      const initial = mockLines.slice(0, 3);\n      setLogs(initial);\n      idx = initial.length;\n\n      // Trickle remaining lines\n      if (idx < mockLines.length) {\n        mockIntervalRef.current = setInterval(() => {\n          if (idx >= mockLines.length) idx = 0; // loop\n          const line = mockLines[idx++];\n          if (line) {\n            setLogs((prev) => {\n              const next = [...prev, line];\n              return next.length > MAX_LINES ? next.slice(-MAX_LINES) : next;\n            });\n          }\n        }, 1500);\n      }\n      return;\n    }\n\n    // Real SSE connection\n    const es = new EventSource(`/api/logs/${encodeURIComponent(droneName)}`);\n    eventSourceRef.current = es;\n\n    es.onmessage = (event) => {\n      setLogs((prev) => {\n        const next = [...prev, event.data as string];\n        return next.length > MAX_LINES ? next.slice(-MAX_LINES) : next;\n      });\n    };\n\n    return () => {\n      es.close();\n      if (mockIntervalRef.current) {\n        clearInterval(mockIntervalRef.current);\n      }\n    };\n  }, [droneName, isMock]);\n\n  return { logs };\n}\n```\n\n3. **web/src/hooks/use-theme.ts**:\n```tsx\nimport { useState, useEffect, useCallback } from \"react\";\n\ntype Theme = \"dark\" | \"light\";\n\nfunction getInitialTheme(): Theme {\n  if (typeof window === \"undefined\") return \"dark\";\n  const stored = localStorage.getItem(\"hive-theme\");\n  if (stored === \"light\" || stored === \"dark\") return stored;\n  return window.matchMedia(\"(prefers-color-scheme: light)\").matches\n    ? \"light\"\n    : \"dark\";\n}\n\nexport function useTheme() {\n  const [theme, setTheme] = useState<Theme>(getInitialTheme);\n\n  useEffect(() => {\n    document.documentElement.setAttribute(\"data-theme\", theme);\n    localStorage.setItem(\"hive-theme\", theme);\n  }, [theme]);\n\n  const toggleTheme = useCallback(() => {\n    setTheme((prev) => (prev === \"dark\" ? \"light\" : \"dark\"));\n  }, []);\n\n  return { theme, toggleTheme };\n}\n```\n\nCreate all three files.",
      "color": "orange",
      "planModeRequired": false,
      "joinedAt": 1770925877329,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    },
    {
      "agentId": "components-worker-1@webui-migration",
      "name": "components-worker-1",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Create these React components in web/src/components/.\n\nThe project uses:\n- Tailwind CSS v4 with CSS variables (--bg, --surface, --surface2, --border, --text, --text-muted, --accent, --accent-hover, --green, --red, --yellow, --purple)\n- shadcn/ui components in @/components/ui/\n- Types from @/types/api\n- cn() helper from @/lib/utils\n\nAGENT_COLORS constant (shared across components):\n```typescript\nexport const AGENT_COLORS = ['#f59e0b', '#a78bfa', '#38bdf8', '#fb7185', '#34d399', '#f472b6', '#60a5fa', '#fbbf24'];\n```\n\nHelper functions (put at top of files that need them or in a shared constants file):\n```typescript\nexport function agentColor(index: number) {\n  return AGENT_COLORS[index % AGENT_COLORS.length]!;\n}\n\nexport function agentInitials(name: string) {\n  if (name === 'lead' || name === 'team-lead') return 'TL';\n  const parts = name.split('-');\n  if (parts.length > 1 && /^\\d+$/.test(parts[parts.length - 1]!)) {\n    return parts[0]![0]!.toUpperCase() + parts[parts.length - 1]!;\n  }\n  return name.slice(0, 2).toUpperCase();\n}\n\nexport function agentColorIndex(name: string, members: MemberInfo[]) {\n  if (name === 'lead' || name === 'team-lead') return 0;\n  const idx = members.findIndex(m => m.name === name);\n  return idx >= 0 ? idx + 1 : 1;\n}\n\nexport function fmtCost(usd: number) {\n  return usd >= 1 ? `$${usd.toFixed(2)}` : `$${usd.toFixed(4)}`;\n}\n\nexport function fmtTokens(n: number) {\n  if (n >= 1e6) return `${(n / 1e6).toFixed(1)}M`;\n  if (n >= 1e3) return `${(n / 1e3).toFixed(1)}k`;\n  return `${n}`;\n}\n\nexport function shortModel(model: string) {\n  if (model.includes('sonnet')) return 'sonnet';\n  if (model.includes('haiku')) return 'haiku';\n  if (model.includes('opus')) return 'opus';\n  return model.split('-')[0] || model;\n}\n```\n\nCreate **web/src/components/constants.ts** with the above constants and helpers.\n\nThen create these component files:\n\n1. **web/src/components/theme-toggle.tsx**:\n```tsx\nimport { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"@/hooks/use-theme\";\n\nexport function ThemeToggle() {\n  const { theme, toggleTheme } = useTheme();\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      title=\"Toggle light/dark theme\"\n      className=\"h-8 w-8\"\n    >\n      {theme === \"dark\" ? <Moon className=\"h-4 w-4\" /> : <Sun className=\"h-4 w-4\" />}\n    </Button>\n  );\n}\n```\n\n2. **web/src/components/cost-card.tsx**:\n```tsx\nimport type { CostInfo } from \"@/types/api\";\nimport { fmtCost, fmtTokens } from \"./constants\";\n\ninterface CostCardProps {\n  cost: CostInfo;\n}\n\nexport function CostCard({ cost }: CostCardProps) {\n  return (\n    <div className=\"flex gap-6 text-sm\" style={{ color: \"var(--text-muted)\" }}>\n      <span>\n        Total:{\" \"}\n        <strong className=\"font-bold\" style={{ color: \"var(--accent)\" }}>\n          {fmtCost(cost.total_usd)}\n        </strong>\n      </span>\n      <span>\n        In: <strong style={{ color: \"var(--text)\" }}>{fmtTokens(cost.input_tokens)}</strong>\n      </span>\n      <span>\n        Out: <strong style={{ color: \"var(--text)\" }}>{fmtTokens(cost.output_tokens)}</strong>\n      </span>\n    </div>\n  );\n}\n```\n\n3. **web/src/components/task-list.tsx**:\n```tsx\nimport type { TaskInfo, MemberInfo } from \"@/types/api\";\nimport { agentColor } from \"./constants\";\n\ninterface TaskListProps {\n  tasks: TaskInfo[];\n  members: MemberInfo[];\n}\n\nfunction statusIcon(status: string) {\n  switch (status) {\n    case \"completed\": return \"\\u2713\";\n    case \"in_progress\": return \"\\u25CB\";\n    default: return \"\\u00B7\";\n  }\n}\n\nfunction statusColor(status: string) {\n  switch (status) {\n    case \"completed\": return \"var(--green)\";\n    case \"in_progress\": return \"var(--accent)\";\n    default: return \"var(--text-muted)\";\n  }\n}\n\nexport function TaskList({ tasks, members }: TaskListProps) {\n  const userTasks = tasks.filter((t) => !t.is_internal);\n\n  if (userTasks.length === 0) {\n    return <div className=\"text-sm\" style={{ color: \"var(--text-muted)\" }}>No tasks</div>;\n  }\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      {userTasks.map((task) => {\n        const ownerIdx = members.findIndex((m) => m.name === task.owner);\n        const ownerColor = ownerIdx >= 0 ? agentColor(ownerIdx + 1) : agentColor(1);\n\n        return (\n          <div key={task.id} className=\"flex items-start gap-3 py-1.5\">\n            <div\n              className=\"mt-0.5 w-5 text-center text-sm font-bold shrink-0\"\n              style={{ color: statusColor(task.status) }}\n            >\n              {statusIcon(task.status)}\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div\n                className=\"text-sm\"\n                style={{\n                  color: task.status === \"in_progress\" ? \"var(--text)\" : \"var(--text-muted)\",\n                  fontWeight: task.status === \"in_progress\" ? 500 : 400,\n                }}\n              >\n                {task.subject}\n              </div>\n              <div className=\"flex items-center gap-2 mt-0.5 flex-wrap\">\n                {task.owner && (\n                  <span className=\"text-xs font-medium\" style={{ color: ownerColor }}>\n                    @{task.owner}\n                  </span>\n                )}\n                {task.duration && (\n                  <span className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>\n                    {task.duration}\n                  </span>\n                )}\n                {task.active_form && (\n                  <span className=\"text-xs italic\" style={{ color: \"var(--text-muted)\" }}>\n                    {task.active_form}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n```\n\n4. **web/src/components/team-bar.tsx**:\n```tsx\nimport type { MemberInfo } from \"@/types/api\";\nimport { agentColor, shortModel } from \"./constants\";\n\ninterface TeamBarProps {\n  members: MemberInfo[];\n  leadModel: string | null;\n  droneLiveness: string;\n}\n\nfunction livenessClass(liveness: string) {\n  switch (liveness) {\n    case \"working\": return \"bg-[var(--green)] shadow-[0_0_5px_rgba(34,197,94,0.4)]\";\n    case \"idle\": return \"bg-[var(--yellow)]\";\n    case \"completed\": return \"bg-[var(--accent)]\";\n    case \"dead\": return \"bg-[var(--red)]\";\n    default: return \"bg-[var(--text-muted)]\";\n  }\n}\n\nexport function TeamBar({ members, leadModel, droneLiveness }: TeamBarProps) {\n  if (members.length === 0) return null;\n\n  return (\n    <div className=\"flex items-center gap-2 flex-wrap\">\n      <span className=\"text-xs font-semibold uppercase tracking-wider\" style={{ color: \"var(--text-muted)\" }}>\n        Team\n      </span>\n\n      {/* Lead tag */}\n      <span\n        className=\"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[13px] font-semibold\"\n        style={{\n          background: \"var(--surface2)\",\n          border: \"1px solid var(--border)\",\n        }}\n      >\n        <span className={`w-[7px] h-[7px] rounded-full shrink-0 ${livenessClass(droneLiveness)}`} />\n        <span style={{ color: agentColor(0) }}>@lead</span>\n        <span className=\"text-[11px] font-normal\" style={{ color: \"var(--text-muted)\" }}>\n          ({shortModel(leadModel || \"?\")})\n        </span>\n      </span>\n\n      <span className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>|</span>\n\n      {/* Member tags */}\n      {members.map((member, i) => (\n        <span\n          key={member.name}\n          className=\"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[13px] font-semibold\"\n          style={{\n            background: \"var(--surface2)\",\n            border: \"1px solid var(--border)\",\n          }}\n        >\n          <span className={`w-[7px] h-[7px] rounded-full shrink-0 ${livenessClass(member.liveness)}`} />\n          <span style={{ color: agentColor(i + 1) }}>@{member.name}</span>\n          <span className=\"text-[11px] font-normal\" style={{ color: \"var(--text-muted)\" }}>\n            ({shortModel(member.model)})\n          </span>\n        </span>\n      ))}\n    </div>\n  );\n}\n```\n\n5. **web/src/components/chat-messages.tsx**:\n```tsx\nimport type { MessageInfo, MemberInfo } from \"@/types/api\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { agentColor, agentInitials, agentColorIndex } from \"./constants\";\n\ninterface ChatMessagesProps {\n  messages: MessageInfo[];\n  members: MemberInfo[];\n  leadModel: string | null;\n}\n\nexport function ChatMessages({ messages, members }: ChatMessagesProps) {\n  if (!messages.length) {\n    return (\n      <div className=\"text-sm italic py-3\" style={{ color: \"var(--text-muted)\" }}>\n        No messages exchanged yet.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-2 max-h-[400px] overflow-y-auto py-1\">\n      {messages.map((msg, i) => {\n        const fromIdx = agentColorIndex(msg.from, members);\n        const toIdx = agentColorIndex(msg.to, members);\n        const fromColor = agentColor(fromIdx);\n        const toColor = agentColor(toIdx);\n        const initials = agentInitials(msg.from);\n        const time = msg.timestamp\n          ? new Date(msg.timestamp).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })\n          : \"\";\n\n        return (\n          <div key={i} className=\"flex gap-2.5 items-start py-2\">\n            <Avatar className=\"h-7 w-7 shrink-0\">\n              <AvatarFallback\n                className=\"text-[11px] font-bold text-white\"\n                style={{ background: fromColor }}\n              >\n                {initials}\n              </AvatarFallback>\n            </Avatar>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-baseline gap-2 mb-0.5\">\n                <span className=\"text-[13px] font-semibold\" style={{ color: fromColor }}>\n                  @{msg.from}\n                </span>\n                <span className=\"text-[11px]\" style={{ color: \"var(--text-muted)\" }}>\n                  &rarr;\n                </span>\n                <span className=\"text-xs font-medium\" style={{ color: toColor }}>\n                  @{msg.to}\n                </span>\n                <span className=\"text-[11px] ml-auto\" style={{ color: \"var(--text-muted)\" }}>\n                  {time}\n                </span>\n              </div>\n              <div\n                className=\"text-[13px] leading-relaxed p-2 px-3 rounded-b-lg rounded-tr-lg\"\n                style={{\n                  color: \"var(--text)\",\n                  background: \"var(--surface2)\",\n                  border: \"1px solid var(--border)\",\n                }}\n              >\n                {msg.text}\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n```\n\n6. **web/src/components/log-viewer.tsx**:\n```tsx\nimport { useEffect, useRef } from \"react\";\n\ninterface LogViewerProps {\n  logs: string[];\n}\n\nexport function LogViewer({ logs }: LogViewerProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (containerRef.current) {\n      containerRef.current.scrollTop = containerRef.current.scrollHeight;\n    }\n  }, [logs]);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"max-h-[350px] overflow-y-auto rounded-lg p-3 font-mono text-xs leading-relaxed\"\n      style={{\n        background: \"var(--bg)\",\n        border: \"1px solid var(--border)\",\n        color: \"var(--text-muted)\",\n      }}\n    >\n      {logs.length === 0 ? (\n        <div>Waiting for logs...</div>\n      ) : (\n        logs.map((line, i) => <div key={i}>{line}</div>)\n      )}\n    </div>\n  );\n}\n```\n\nCreate all 7 files (constants.ts + 6 components).",
      "color": "pink",
      "planModeRequired": false,
      "joinedAt": 1770925950038,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    },
    {
      "agentId": "components-worker-2@webui-migration",
      "name": "components-worker-2",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "You are working on the Hive project at /Users/fr162241/Projects/hive. Create the main layout components for the React WebUI.\n\nThe project uses:\n- Tailwind CSS v4 with CSS variables (--bg, --surface, --surface2, --border, --text, --text-muted, --accent, --accent-hover, --green, --red, --yellow, --purple)\n- shadcn/ui components in @/components/ui/\n- Types from @/types/api\n- Hooks: useDrones from @/hooks/use-drones, useLogs from @/hooks/use-logs, useTheme from @/hooks/use-theme\n- Helper functions from @/components/constants (fmtCost, agentColor, etc.)\n- Other components are in @/components/ (ThemeToggle, TaskList, TeamBar, ChatMessages, CostCard, LogViewer)\n\nCreate these files:\n\n1. **web/src/components/drone-item.tsx**:\n```tsx\nimport type { DroneInfo } from \"@/types/api\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { fmtCost } from \"./constants\";\n\ninterface DroneItemProps {\n  drone: DroneInfo;\n  selected: boolean;\n  onClick: () => void;\n}\n\nfunction livenessColor(liveness: string) {\n  switch (liveness) {\n    case \"working\": return \"var(--green)\";\n    case \"idle\": return \"var(--yellow)\";\n    case \"completed\": return \"var(--accent)\";\n    case \"dead\": return \"var(--red)\";\n    default: return \"var(--text-muted)\";\n  }\n}\n\nfunction livenessShadow(liveness: string) {\n  if (liveness === \"working\") return \"0 0 6px rgba(34, 197, 94, 0.5)\";\n  return \"none\";\n}\n\nexport function DroneItem({ drone, selected, onClick }: DroneItemProps) {\n  const [done, total] = drone.progress;\n  const pct = total > 0 ? Math.round((done / total) * 100) : 0;\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors\"\n      style={{\n        background: selected ? \"var(--surface2)\" : \"transparent\",\n        borderLeft: selected ? \"3px solid var(--accent)\" : \"3px solid transparent\",\n      }}\n      onMouseEnter={(e) => {\n        if (!selected) e.currentTarget.style.background = \"var(--surface2)\";\n      }}\n      onMouseLeave={(e) => {\n        if (!selected) e.currentTarget.style.background = \"transparent\";\n      }}\n    >\n      {/* Status dot */}\n      <div\n        className=\"w-2.5 h-2.5 rounded-full shrink-0\"\n        style={{\n          background: livenessColor(drone.liveness),\n          boxShadow: livenessShadow(drone.liveness),\n        }}\n      />\n\n      {/* Info */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"text-sm font-semibold truncate\" style={{ color: \"var(--text)\" }}>\n          {drone.name}\n        </div>\n        <div className=\"flex items-center gap-3 mt-1\">\n          <span className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>\n            {done}/{total} ({pct}%)\n          </span>\n          <span className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>\n            {drone.elapsed}\n          </span>\n        </div>\n        <Progress value={pct} className=\"h-1 mt-1.5\" />\n      </div>\n\n      {/* Cost */}\n      <span className=\"text-xs font-medium shrink-0\" style={{ color: \"var(--text-muted)\" }}>\n        {fmtCost(drone.cost.total_usd)}\n      </span>\n    </div>\n  );\n}\n```\n\n2. **web/src/components/sidebar.tsx**:\n```tsx\nimport type { DroneInfo } from \"@/types/api\";\nimport { ThemeToggle } from \"./theme-toggle\";\nimport { DroneItem } from \"./drone-item\";\nimport { fmtCost } from \"./constants\";\n\ninterface SidebarProps {\n  drones: DroneInfo[];\n  selectedDrone: string | null;\n  onSelectDrone: (name: string) => void;\n  connectionStatus: \"connected\" | \"disconnected\" | \"mock\";\n}\n\nfunction sseIndicator(status: \"connected\" | \"disconnected\" | \"mock\") {\n  const colors: Record<string, string> = {\n    connected: \"var(--green)\",\n    mock: \"var(--yellow)\",\n    disconnected: \"var(--red)\",\n  };\n  const labels: Record<string, string> = {\n    connected: \"Live\",\n    mock: \"Mock\",\n    disconnected: \"Reconnecting...\",\n  };\n  return { color: colors[status] || \"var(--red)\", label: labels[status] || \"Unknown\" };\n}\n\nexport function Sidebar({ drones, selectedDrone, onSelectDrone, connectionStatus }: SidebarProps) {\n  const activeCount = drones.filter((d) => d.liveness === \"working\").length;\n  const totalCost = drones.reduce((sum, d) => sum + (d.cost?.total_usd || 0), 0);\n  const sse = sseIndicator(connectionStatus);\n\n  return (\n    <div\n      className=\"w-[300px] flex flex-col shrink-0 transition-colors\"\n      style={{\n        background: \"var(--surface)\",\n        borderRight: \"1px solid var(--border)\",\n      }}\n    >\n      {/* Header */}\n      <div className=\"p-5\" style={{ borderBottom: \"1px solid var(--border)\" }}>\n        <div className=\"flex items-center justify-between mb-3\">\n          <h1\n            className=\"text-xl font-extrabold tracking-[3px]\"\n            style={{ color: \"var(--accent)\" }}\n          >\n            HIVE\n          </h1>\n          <ThemeToggle />\n        </div>\n        <div className=\"flex items-center gap-4 text-xs\" style={{ color: \"var(--text-muted)\" }}>\n          <span>\n            Active: <strong style={{ color: \"var(--text)\" }}>{activeCount}</strong>\n          </span>\n          <span>\n            Total: <strong style={{ color: \"var(--text)\" }}>{drones.length}</strong>\n          </span>\n          <span>\n            Cost: <strong style={{ color: \"var(--text)\" }}>{fmtCost(totalCost)}</strong>\n          </span>\n        </div>\n        <div className=\"flex items-center gap-2 mt-2\">\n          <div\n            className=\"w-2 h-2 rounded-full\"\n            style={{ background: sse.color }}\n          />\n          <span className=\"text-xs\" style={{ color: \"var(--text-muted)\" }}>\n            {sse.label}\n          </span>\n        </div>\n      </div>\n\n      {/* Drone list */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {drones.length === 0 ? (\n          <div className=\"p-5 text-sm\" style={{ color: \"var(--text-muted)\" }}>\n            No drones detected.\n          </div>\n        ) : (\n          drones.map((drone) => (\n            <DroneItem\n              key={drone.name}\n              drone={drone}\n              selected={selectedDrone === drone.name}\n              onClick={() => onSelectDrone(drone.name)}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n```\n\n3. **web/src/components/detail-panel.tsx**:\n```tsx\nimport type { DroneInfo } from \"@/types/api\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { TaskList } from \"./task-list\";\nimport { TeamBar } from \"./team-bar\";\nimport { ChatMessages } from \"./chat-messages\";\nimport { CostCard } from \"./cost-card\";\nimport { LogViewer } from \"./log-viewer\";\nimport { fmtCost } from \"./constants\";\nimport { useLogs } from \"@/hooks/use-logs\";\n\ninterface DetailPanelProps {\n  drone: DroneInfo | null;\n  isMock: boolean;\n}\n\nfunction statusVariant(liveness: string) {\n  switch (liveness) {\n    case \"working\": return \"success\" as const;\n    case \"completed\": return \"default\" as const;\n    case \"dead\": return \"destructive\" as const;\n    case \"stopped\": return \"secondary\" as const;\n    default: return \"outline\" as const;\n  }\n}\n\nfunction SectionTitle({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"flex items-center gap-3 mb-3\">\n      <span\n        className=\"text-xs font-semibold uppercase tracking-wider\"\n        style={{ color: \"var(--text-muted)\" }}\n      >\n        {children}\n      </span>\n      <div className=\"flex-1 h-px\" style={{ background: \"var(--border)\" }} />\n    </div>\n  );\n}\n\nexport function DetailPanel({ drone, isMock }: DetailPanelProps) {\n  const { logs } = useLogs(drone?.name ?? null, isMock);\n\n  if (!drone) {\n    return (\n      <div\n        className=\"flex-1 flex items-center justify-center\"\n        style={{ background: \"var(--bg)\" }}\n      >\n        <span className=\"text-lg\" style={{ color: \"var(--text-muted)\" }}>\n          Select a drone from the sidebar\n        </span>\n      </div>\n    );\n  }\n\n  const [done, total] = drone.progress;\n  const pct = total > 0 ? Math.round((done / total) * 100) : 0;\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\" style={{ background: \"var(--bg)\" }}>\n      {/* Header */}\n      <div\n        className=\"flex items-center gap-3 px-6 py-4 shrink-0\"\n        style={{ borderBottom: \"1px solid var(--border)\" }}\n      >\n        <h2 className=\"text-lg font-bold\" style={{ color: \"var(--text)\" }}>\n          {drone.name}\n        </h2>\n        <Badge variant={statusVariant(drone.liveness)}>{drone.status}</Badge>\n        <Badge variant=\"outline\">{drone.lead_model || \"?\"}</Badge>\n        <Badge variant=\"outline\">{drone.branch}</Badge>\n        <Badge variant=\"outline\" style={{ color: \"var(--accent)\" }}>\n          {fmtCost(drone.cost.total_usd)}\n        </Badge>\n        <span className=\"ml-auto text-sm\" style={{ color: \"var(--text-muted)\" }}>\n          {drone.elapsed}\n        </span>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto px-6 py-4\">\n        <div className=\"flex flex-col gap-6 max-w-4xl\">\n          {/* Progress */}\n          <div>\n            <div className=\"flex justify-between text-sm mb-1.5\" style={{ color: \"var(--text-muted)\" }}>\n              <span>Tasks: {done}/{total}</span>\n              <span>{pct}%</span>\n            </div>\n            <div className=\"h-2 rounded-full overflow-hidden\" style={{ background: \"var(--surface2)\" }}>\n              <div\n                className=\"h-full rounded-full transition-all\"\n                style={{ width: `${pct}%`, background: \"var(--accent)\" }}\n              />\n            </div>\n          </div>\n\n          {/* Tasks */}\n          <div>\n            <SectionTitle>Tasks</SectionTitle>\n            <TaskList tasks={drone.tasks} members={drone.members} />\n          </div>\n\n          {/* Team */}\n          {drone.members.length > 0 && (\n            <div>\n              <SectionTitle>Team</SectionTitle>\n              <TeamBar\n                members={drone.members}\n                leadModel={drone.lead_model}\n                droneLiveness={drone.liveness}\n              />\n            </div>\n          )}\n\n          {/* Messages */}\n          <div>\n            <SectionTitle>Messages</SectionTitle>\n            <ChatMessages\n              messages={drone.messages}\n              members={drone.members}\n              leadModel={drone.lead_model}\n            />\n          </div>\n\n          {/* Cost */}\n          <div>\n            <SectionTitle>Cost</SectionTitle>\n            <CostCard cost={drone.cost} />\n          </div>\n\n          {/* Logs */}\n          <div>\n            <SectionTitle>Live Logs</SectionTitle>\n            <LogViewer logs={logs} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n```\n\n4. **web/src/App.tsx** — Replace the placeholder with the full app:\n```tsx\nimport { useState, useEffect } from \"react\";\nimport { useDrones } from \"@/hooks/use-drones\";\nimport { useTheme } from \"@/hooks/use-theme\";\nimport { Sidebar } from \"@/components/sidebar\";\nimport { DetailPanel } from \"@/components/detail-panel\";\n\nexport default function App() {\n  const { drones, connectionStatus } = useDrones();\n  const [selectedDrone, setSelectedDrone] = useState<string | null>(null);\n  useTheme(); // Apply theme on mount\n\n  const isMock = connectionStatus === \"mock\";\n\n  // Auto-select first drone if only one\n  useEffect(() => {\n    if (drones.length === 1 && !selectedDrone) {\n      setSelectedDrone(drones[0]!.name);\n    }\n  }, [drones, selectedDrone]);\n\n  // Auto-select first drone in mock mode\n  useEffect(() => {\n    if (isMock && drones.length > 0 && !selectedDrone) {\n      setSelectedDrone(drones[0]!.name);\n    }\n  }, [isMock, drones, selectedDrone]);\n\n  const activeDrone = drones.find((d) => d.name === selectedDrone) ?? null;\n\n  return (\n    <div className=\"flex h-screen\">\n      <Sidebar\n        drones={drones}\n        selectedDrone={selectedDrone}\n        onSelectDrone={setSelectedDrone}\n        connectionStatus={connectionStatus}\n      />\n      <DetailPanel drone={activeDrone} isMock={isMock} />\n    </div>\n  );\n}\n```\n\nMake sure to READ the existing App.tsx first before overwriting it. Create all 4 files.",
      "color": "cyan",
      "planModeRequired": false,
      "joinedAt": 1770925990815,
      "tmuxPaneId": "in-process",
      "cwd": "/Users/fr162241/Projects/hive",
      "subscriptions": [],
      "backendType": "in-process"
    }
  ]
}